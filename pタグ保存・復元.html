<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>テストメーカー with 復元機能</title>
</head>
<body>
<button onclick="htmlToJSON()">save</button>
<button onclick="jsonToHTML()">load</button>
<p id="text">『VALORANT』は、ライアットゲームズが開発・運営している<span><input type="text"><button>x</button></span>合衆国のファーストパーソン・シューティングゲーム である。<span><select><option>aaa</option><option>bbb</option><option>ccc</option></select><button>x</button></span>による初のFPSジャンルの作品であり、2020年6月2日にMicrosoft Windows向けに基本プレイ無料でリリースされた。</p>
<p id="json"></p>
<script>
    let jsonString = null;
    let restoredPTag = null;

    // HTMLからJSONに保存
    function htmlToJSON() {
        const pTag = document.querySelector("#text");
        const json = {
            tag: "p",
            id: "text",
            content: pTag.innerHTML,
        };
        jsonString = JSON.stringify(json);
        console.log(jsonString);
    }

    // JSONからHTMLに復元
    function jsonToHTML() {
        const json = JSON.parse(jsonString);
        const pTag = document.createElement(json.tag);
        pTag.id = json.id;
        pTag.innerHTML = json.content;
        restoredPTag = pTag;
        // 作成したp要素をDOMに追加
        document.querySelector("#json").appendChild(restoredPTag);
    }
</script>
</body>
</html>
